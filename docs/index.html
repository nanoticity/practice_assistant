<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Practice Assistant</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        .demo, .demo-header, .demo-content, #canvas {
            border-radius: 2rem;
        }
        .demo {
            background-color: #fff;
            margin: 20px auto;
            max-width: 1000px;
            overflow: hidden;
        }
        .demo-header {
            background-color: #007bff;
            color: #fff;
            padding: 15px 20px;
            font-size: 20px;
        }
        .demo-content {
            padding: 20px;
        }

        #canvas {
            margin: 0 auto;
            display: block;
            padding: 20px;
            size: 1600px, 1097px;
        }
        .directions-box {
            background: #fff;
            border-radius: 2rem;
            box-shadow: 0 8px 32px 0 rgba(0,0,0,0.12), 0 1.5px 4px 0 rgba(0,0,0,0.10);
            padding: 32px 28px;
            margin: 32px auto;
            max-width: 800px;
        }
    </style>
          <script src="https://cdn.jsdelivr.net/pyodide/v0.26.3/full/pyodide.js"></script>
</head>
<body>Â 
    <div id="loading-screen" style="position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.95);z-index:9999;font-size:2rem;opacity:1;transition:opacity 0.7s cubic-bezier(.4,0,.2,1);">
        <div>
            <div style="text-align:center;margin-bottom:1rem;">
                <span style="display:inline-block;width:2.5rem;height:2.5rem;border:4px solid #2196F3;border-top:4px solid #fff;border-radius:50%;animation:spin 1s linear infinite;"></span>
            </div>
            Loading Practice Assistant...
        </div>
    </div>
    <style>
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    </style>
    <script type="text/javascript">
        const curloc = document.location.href;
        const curdir = curloc.substring(0, curloc.lastIndexOf('/'));
  
        async function main(){
          let pyodide = await loadPyodide();
          await pyodide.loadPackage(["pygame-ce"], { checkIntegrity: false })
          canvas = document.getElementById("canvas");
          pyodide.canvas.setCanvas2D(canvas);
          let href = window.location.href;
          var link = href.substring(0, href.lastIndexOf('/')) + "/assistant.tar";
          let zipResponse = await fetch(link);
          let zipBinary = await zipResponse.arrayBuffer();
          pyodide.unpackArchive(zipBinary, "tar", { extractDir: "/lib/python3.12/site-packages/assistant" });
          pyodide.runPythonAsync(`
import sys
sys.path.append('/lib/python3.12/site-packages/assistant/docs')
import main
main.main()
`)
          // Fade out loading screen when done
          const loading = document.getElementById('loading-screen');
          loading.style.opacity = 0;
          setTimeout(() => { loading.style.display = 'none'; }, 700);
        }
        main();
      </script>
<div class="demo-header">Yunchan Practice Assistant</div>
<div class="directions-box">
  <h1>Directions for Use</h1>
  <p>
      Pick a passage in your music and only practice that one. If you succeed in playing the phrase then press the right button on your Airturn or enter and play again. The counter and voice feedback will do everything for you. If you are comfortable with a full page, go back and practice transitions between the passages that you practiced. This helps cement them when you play through the whole piece later. Scroll down to get started!
  </p>
</div>
<canvas id="canvas" style="width:fit-content; height:fit-content;"></canvas>
<p>Made with <span style="color: #ff0000;">&#9829;</span> By Nano </p>
</body>
</html>